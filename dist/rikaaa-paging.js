/**
 * @license
 * Generated : 2019-09-27
 * Version : 0.5.0
 * Author : rikaaa.org | Yuki Hata
 * Url : http://rikaaa.org
 *
 *
 *
 * Copyright 2019 rikaaa.org | Yuki Hata
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function __generator(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function __values(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}var onebang=function(e){var t,r=!0;return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return r?(t=e.apply(this,n),r=!1,t):(e=null,!1)}},handleClick=function(e,t){for(var r=onebang(t),n=function(e){return e.preventDefault(),r(e),!1},a=0;a<e.length;a++)e[a].onclick=n},_this=void 0,dataStringify=function(e){var t,r,n={};try{for(var a=__values(Object.entries(e)),o=a.next();!o.done;o=a.next()){var i=__read(o.value,2),u=i[0],l=i[1],c=null;c="function"==typeof l?l.toString():l,n[u]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n},dataParse=function(e){var t,r,n={};try{for(var a=__values(Object.entries(e)),o=a.next();!o.done;o=a.next()){var i=__read(o.value,2),u=i[0],l=i[1],c=null;c="string"==typeof l&&l.match(/(^function|=>)/)?Function.call(_this,"return "+l)():l,n[u]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n},pushState=function(e,t,r){history.pushState(dataStringify(e),t,r)},replaceState=function(e,t,r){history.replaceState(dataStringify(e),t,r)},handlePopstate=function(e){var t=onebang(e);self.onpopstate=function(e){t(dataParse(__assign({},e.state)))}},takeReady=function(e,t,r){var n=location.href,a={},o=function(r){var o=!("click"!==r.type&&!r.type),i=o?r.target.href:r.href,u=location.href!==i;a.currentUrl=n,a.href=i,a.afterDelay=o?0:r.afterDelay,a.onProgress=o?function(){}:r.onProgress,a.onDelay=o?function(){}:r.onDelay,t.next({ready:e(a),isPushstate:!(!o||!u)})};handleClick(r,o),handlePopstate(o)},oReq=new XMLHttpRequest,HTMLtextToHTMLElement=function(e){var t=document.createElement("html"),r=e.match(/<html[^>]*>([\s\S.]*)<\/html>/i)[1];return t.innerHTML=r,t},request=function(e,t,r){oReq.abort(),oReq.open("GET",e,!0),oReq.onprogress=function(e){if(e.lengthComputable){var r=e.loaded/e.total*100;t({percentComplete:r})}else t({percentComplete:null})},oReq.onreadystatechange=function(){4===oReq.readyState&&r({html:200===oReq.status?HTMLtextToHTMLElement(oReq.response):null,status:oReq.status,statusText:oReq.statusText,url:e})},oReq.send()},getMeta=function(e,t){return Array.from(t.querySelectorAll("meta")).filter(function(t){return t.getAttribute("name")===e})},takeStart=function(e,t,r,n){request(r.href,r.onProgress,function(a){var o={},i="OK"===a.statusText;if(!i)return self.location.href=r.href,!1;o.ready=r,o.idAttributes=n,o.nextTargets=i?n.reduce(function(e,t){var r={};return r[t]=a.html.querySelector(t),__assign(__assign({},e),r)},{}):null,o.currentTargets=i?n.reduce(function(e,t){var r={};return r[t]=document.querySelector(t),__assign(__assign({},e),r)},{}):null,o.description=i&&a.html?getMeta("description",a.html)[0].getAttribute("content"):null,o.keywords=i&&a.html?getMeta("keywords",a.html)[0].getAttribute("content").split(","):null,o.response=a,o.title=i?a.html.querySelector("title").textContent:null,o.afterDelay=0,o.onDelay=function(){},t.next(e(o))})},elementWrap=function(e){var t=document.createElement("div");return e.parentNode.insertBefore(t,e),t.appendChild(e),t},elementUnwrap=function(e){var t=e,r=Array.from(e.childNodes)[0];return t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t),r},takeEnd=function(e,t,r){var n={previousTargets:{},updatedTargets:{}};r.idAttributes.forEach(function(e){var t=document.querySelector(e);n.previousTargets[e]=t;var a=null!==t?elementWrap(t):null;null!==a&&null!==r.nextTargets[e]&&(a.removeChild(t),a.appendChild(r.nextTargets[e])),n.updatedTargets[e]=null!==a?elementUnwrap(a):null}),document.title=r.title,getMeta("keywords",document)[0].setAttribute("content",r.keywords.join(",")),getMeta("description",document)[0].setAttribute("content",r.description),n.idAttributes=r.idAttributes,n.afterDelay=0,n.newUrl=r.response.url,n.ready=r.ready,n.start=r,n.afterDelay=0,n.onDelay=function(){},setTimeout(function(){return t.next(e(n))},0)},takeResult=function(e,t,r,n){e({oldUrl:r.ready.currentUrl,newUrl:r.ready.href,updatedTarget:r.updatedTarget,previousTarget:r.previousTarget}),n&&pushState(r.ready,r.start.title,r.newUrl),setTimeout(function(){return t.next()},0)},delayMain=function(e,t,r){var n,a,o=performance.now(),i=null,u=function(l){i=requestAnimationFrame(u),0!==e?a=(n=(l-o)/e)>=1?1:n:(n=1,a=1),t(a),a>=1&&(cancelAnimationFrame(i),r())};i=requestAnimationFrame(u)},delay=function(e,t,r){delayMain(e,r,function(){t.next()})},LINER="LINEAR",EASE_IN="EASE_IN",EASE_OUT="EASE_OUT",EASE_IN_OUT="EASE_IN_OUT",curve=function(e,t){switch(e){case LINER:return t;case EASE_IN:return t*t;case EASE_OUT:return t*(2-t);case EASE_IN_OUT:return t<.5?2*t*t:(4-2*t)*t-1;default:return t}},map=function(e,t,r,n,a){return n+(e-t)/(r-t)*(a-n)},IDATTRIBUTE_ERROR_TEXT='The first argument of rikaaaPaging constructor is invalid. The argument type is array of id attribute string. For example "[#idAttribute1,#idAttribute2]".',ANCHORS_ERROR_TEXT="The second argument of rikaaaPaging constructor is invalid. The argument type is nodelist of HTML anchor elements.",ENTIRES_ARG_FUNC_DONT_HAVE_RETUREN_VAL_ERROR_TEXT_1="'s argument is invalid. The argument is function with return own argument.",ENTIRES_ARG_FUNC_DONT_HAVE_RETUREN_VAL_ERROR_TEXT_2="'s argument is invalid. The argument is function.",notHaveError={isError:!1,errorTxt:""},checkingIdAttribute=function(e){var t={isError:!0,errorTxt:IDATTRIBUTE_ERROR_TEXT};return Array.prototype.isPrototypeOf(e)?0!==e.filter(function(e){return"string"!=typeof e}).length?t:e.filter(function(e){return/^#/.test(e)}).length!==e.length?t:notHaveError:t},checkingAnchors=function(e){var t={isError:!0,errorTxt:ANCHORS_ERROR_TEXT},r=Array.from(e);return NodeList.prototype.isPrototypeOf(e)?0!==r.filter(function(e){return"A"!==e.tagName}).length?t:notHaveError:t},checkingEntiresFucArg=function(e,t){var r={isError:!0,errorTxt:e+"()"+ENTIRES_ARG_FUNC_DONT_HAVE_RETUREN_VAL_ERROR_TEXT_1};return"hookResult"===e&&(r.errorTxt=e+"()"+ENTIRES_ARG_FUNC_DONT_HAVE_RETUREN_VAL_ERROR_TEXT_2),"function"!=typeof t?r:/return/.test(t.toString())||"hookResult"===e?notHaveError:r};Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=[t[r],e[t[r]]];return n}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},r=Math.pow(2,53)-1,n=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),r)};return function(e){var r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,o=arguments.length>1?arguments[1]:void 0;if(void 0!==o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var i,u=n(r.length),l=t(this)?Object(new this(u)):new Array(u),c=0;c<u;)i=r[c],l[c]=o?void 0===a?o(i,c):o.call(a,i,c):i,c+=1;return l.length=u,l}}());var entires={},callbacks={},rikaaaPaging=function(e,t){var r,n;self.onpageshow=function(e){e.persisted&&self.location.reload()},replaceState({currentUrl:null,href:location.href,afterDelay:0,onProgress:function(){},onDelay:function(){}},document.title,self.location.href);var a=checkingIdAttribute(e),o=checkingAnchors(t);if(a.isError)throw new Error(a.errorTxt);if(o.isError)throw new Error(o.errorTxt);var i=function(){var r=function(){var r,n,a,o,i,u;return __generator(this,function(l){switch(l.label){case 0:return[4];case 1:r=l.sent(),l.label=2;case 2:return[4,takeReady(callbacks.hookReady,r,t)];case 3:return n=l.sent(),a=n.ready,o=n.isPushstate,[4,delay(a.afterDelay,r,a.onDelay)];case 4:return l.sent(),[4,takeStart(callbacks.hookStart,r,a,e)];case 5:return i=l.sent(),[4,delay(i.afterDelay,r,i.onDelay)];case 6:return l.sent(),[4,takeEnd(callbacks.hookEnd,r,i)];case 7:return u=l.sent(),[4,delay(u.afterDelay,r,u.onDelay)];case 8:return l.sent(),[4,takeResult(callbacks.hookResult,r,u,o)];case 9:return l.sent(),[3,2];case 10:return[2]}})}();r.next(),r.next(r)};["hookReady","hookStart","hookEnd","hookResult"].forEach(function(e){entires[e]=function(t){return function(e,t){void 0===t&&(t=function(e){return e});var r=checkingEntiresFucArg(e,t);if(r.isError)throw new Error(r.errorTxt);if(callbacks[e]=t,i(),"hookResult"!==e)return entires}(e,t)}});try{for(var u=__values(Object.entries(entires)),l=u.next();!l.done;l=u.next()){l.value[1]()}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return entires.curve=curve,entires.map=map,entires};export default rikaaaPaging;